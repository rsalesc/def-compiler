int step;
int MOD;

def int mod(int x, int MOD){
  int q = x/MOD;
  return x-q*MOD;
}

def int f(int x){
  return mod(x*step, MOD);
}

def void solve(int x, int s, int m){
  step = s;
  MOD = m;

  int a = x;
  int b = f(x);

  while(a != b){
    a = f(a);
    b = f(f(b));
  }

  b = f(b);
  int ans = 1;
  while(a != b){
    b = f(b);
    ans = ans+1;
  }

  print(ans);
}

def void main(){
  solve(42, 2, 189281);
  solve(2, 3, 7);
}
